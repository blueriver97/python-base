#!/usr/bin/env bash
# File generated by pre-commit: https://pre-commit.com
# ID: 138fd403232d2ddd5efb44317e38bf03

INSTALL_PYTHON=$(command -v python3 || command -v python)
ARGS=(hook-impl --config=.pre-commit-config.yaml --hook-type=pre-commit)

HERE="$(cd "$(dirname "$0")" && pwd)"
ARGS+=(--hook-dir "$HERE" -- "$@")

# 현재 staging된 파일 목록 저장
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM)

# 포맷할 파일이 있을 경우에만 실행
if [[ -n "$STAGED_FILES" ]]; then
  echo "$STAGED_FILES" | xargs npx prettier --write
  echo "$STAGED_FILES" | xargs git add
fi

# pre-commit 실행
if [ -x "$INSTALL_PYTHON" ]; then
	exec "$INSTALL_PYTHON" -mpre_commit "${ARGS[@]}"
elif command -v pre-commit >/dev/null; then
	exec pre-commit "${ARGS[@]}"
else
	echo "pre-commit not found.  Did you forget to activate your virtualenv?" 1>&2
	exit 1
fi
